<!DOCTYPE html>
<html>
<head>
    <title>Калькулятор</title>
</head>
<body>
    <h1>Простой калькулятор</h1>

    <input type="number" id="num1" placeholder="Первое число">
    <input type="number" id="num2" placeholder="Второе число">

    <br><br>

    <button onclick="calculate('add')">Сложить</button>
    <button onclick="calculate('sub')">Вычесть</button>
    <button onclick="calculate('multiply')">Умножить</button>
    <button onclick="calculate('division')">Разделить</button>

    <div id="result"></div>

    <script>
        async function calculate(operation) {
            const num1 = parseFloat(document.getElementById('num1').value);
            const num2 = parseFloat(document.getElementById('num2').value);

            // Проверка на валидность чисел
            if (isNaN(num1) || isNaN(num2)) {
                document.getElementById('result').innerHTML =
                    'Ошибка: Введите оба числа';
                return;
            }

            try {
                const response = await fetch('/calculate', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        param1: num1,
                        param2: num2,
                        operation: operation
                    })
                });
                
                const data = await response.json();
                
                // Добавьте эту часть для отображения результата:
                if (data.error) {
                    document.getElementById('result').innerHTML =
                        'Ошибка: ' + data.error;
                } else {
                    document.getElementById('result').innerHTML =
                        'Результат: ' + data.result;
                }
                
            } catch (error) {
                console.error('Ошибка:', error);
                document.getElementById('result').innerHTML =
                    'Ошибка при выполнении запроса';
            }
        }
    </script>
</body>
</html>